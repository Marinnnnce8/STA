if("undefined"==typeof jQuery)throw new Error("$nb requires jQuery. jQuery must be included before this script.");if("undefined"==typeof UIkit)throw new Error("$nb requires UIkit. UIkit must be included before this script.");!function(h){$nb={defaults:{offset:128,speed:256,ukAlert:{options:{animation:!0,close:!1,duration:256},style:"primary"},ukNotification:{status:"primary",pos:"top-right",timeout:4096}},init:function(){this.mailto(),this.tel(),this.blocks.init(),this.json.init(),this.form.init()},attr:function(t,i,e){this.isArray(t)&&t.length&&(t={class:t},i="div");var s=[];return h.each(t,function(t,n){switch(t){case"tag":$nb.x(i)&&(i=n);break;case"close":e=n;break;default:!1!==n&&(""==n||$nb.isType(n,"boolean")?s.push(t):($nb.isArray(n)?n=n.join(" "):$nb.isObject(n)&&(n=JSON.stringify(n)),s.push(t?t+"='"+n+"'":n)))}}),s=(s=s.join(" "))?" "+s:"",i&&(i=i.replace(/<|>|\//gi,"")),i?"<"+i+s+">"+(e?"</"+i+">":""):s},base64toJSON:function(t){return JSON.parse(atob(t))},blocks:{init:function(){h("[data-nb-block]").length&&h("[data-nb-block]").each(function(){var t=h(this),n=t.data("nb-block");h.isFunction($nb.blocks[n])&&$nb.blocks[n](t)})}},debounce:function(e,s,r){var a;return s=this.xy(s,this.defaults.speed),function(){var t=this,n=arguments,i=r&&!a;clearTimeout(a),a=setTimeout(function(){a=null,r||e.apply(t,n)},s),i&&e.apply(t,n)}},faIcon:function(t,n,i){if(this.x(t))return"";var e="fa-",s=[this.isType(n,"string")?n:"fas",e+t.replace(e,"")];if(this.isArray(i))for(var r=0;r<i.length;r++)s.push(e+i[r]);return this.attr({class:s,"aria-hidden":"true"},"i",!0)},form:{button:{},form:{},request:{},buttonText:"",init:function(){this.CSRF(),h("[data-nb-form]").length&&h(document).on("submit","[data-nb-form]",function(t){t.preventDefault?t.preventDefault():t.returnValue=!1;var n=h(this),i=n.data("nb-form"),e=!0;if(h.each(n.find(":input[required]:visible"),function(){h(this).val()||(e=!1)}),!e)return UIkit.modal.alert(n.data("nb-form-invalid")),$nb.form.reset(),!1;$nb.form.form=n,$nb.form.button=n.find("button[type=submit]"),$nb.isObject(i)&&i.confirm?UIkit.modal.confirm(i.confirm).then(function(){$nb.form.post()},function(){return $nb.form.reset(),!1}):$nb.form.post()})},CSRF:function(){var n=h("input[type=hidden]._post_token");n.length&&h.get("",{CSRF:!0},function(t){n.each(function(){h(this).attr("name",t.name),h(this).val(t.value)})})},post:function(){var t=this.form,n=this.button;this.buttonText=n.html(),n.html($nb.ukSpinner(.4)),this.request=h.post(t.attr("action"),t.serializeArray(),function(t){$nb.form.onSuccess(t)},"json").fail(function(t,n,i){$nb.form.onFail(t,n,i)})},onResult:function(t){},onSuccess:function(t){this.onResult(t);var n=this.form.find(".g-recaptcha"),i=t.message;switch(t.response){case 200:$nb.x(i.notification)?this.complete(i):($nb.ukNotification(i.notification),this.complete()),$nb.x(i.redirect)?(this.button.remove(),n.length&&n.remove()):$nb.isType(i.redirect,"string")?window.location.href=i.redirect:window.location.reload();break;case 401:case 412:this.resetButton(),UIkit.modal.alert(i),n.length&&grecaptcha.reset();break;default:this.button.remove(),this.complete(i),n.length&&n.remove()}this.reset()},onFail:function(t,n,i){UIkit.modal.alert($nb.ukAlert(i,"danger")),this.resetButton(),this.reset()},complete:function(t){h.each(this.form.find(":input"),function(){h(this).attr("disabled",!0)}),$nb.isObject(t)&&(t=t.message),$nb.x(t)||(this.form.prepend(t),h("html, body").animate({scrollTop:this.form.offset().top-$nb.defaults.offset},2*$nb.defaults.speed))},reset:function(){this.buttonText="",this.button={},this.form={},this.request={}},resetButton:function(){this.button&&this.buttonText&&this.button.html(this.buttonText)}},icon:function(t){return this.isType(t,"string")&&(t={icon:t}),"uk"==t.icon.substr(0,2)?this.ukIcon(t.icon,t.ratio):this.faIcon(t.icon,t.prefix,t.classes)},img:function(t,n,i){this.isType(n,"string")&&(n={alt:n}),this.isObject(n)||(n={}),this.isObject(i)||(i={});var e="img"==(i=h.extend({tag:"img","uk-img":!0},i)).tag,s=!1;if(this.isObject(t)&&(s=t.srcset,t=t.url),n=h.extend({alt:e&&"",width:0,height:0},n),!t)return"";var r=t.match(/(\.\d*x\d*\.)/g);if(e&&r){var a=r[0].split("x");n.width||(n.width=parseInt(a[0].replace(".",""))),n.height||(n.height=parseInt(a[1].replace(".","")))}return 0!=n.width&&e||(n.width=!1),0!=n.height&&e||(n.height=!1),e||(n.alt=!1),i["uk-img"]?h.extend(n,{src:e&&"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==","data-src":t,"data-srcset":s,"data-uk-img":i["uk-img"]}):e&&(n.src=t,n.srcset=s),this.attr(n,i.tag)},imgBg:function(t,n,i){if(this.isObject(n)||(n={}),this.isObject(i)||(i={}),this.isObject(t)){var e=this.isObject(t.focus)?t.focus:{left:50,top:50};n.style="background-position: "+e.left+"% "+e.top+"%;",t=t.url}return n=h.extend({alt:!1,class:"uk-background-cover"},n),i=h.extend({tag:"div",focus:!0},i),this.x(i["uk-img"])||!1!==i["uk-img"]||(n.style=(n.style?n.style:"")+"background-image:url("+t+");"),this.img(t,n,i)},isArray:function(t){return Array.isArray(t)},isObject:function(t){return this.isType(t,"object")},isTag:function(t){return"<"==t.substr(0,1)&&">"==t.substr(t.length-1,1)},isType:function(t,n){return typeof t===(void 0===n?"undefined":n)},json:{data:{},limit:{},render:{},init:function(){h("[data-nb-json]").length&&h("[data-nb-json]").each(function(){$nb.json.get(h(this))}),this.renderItems()},get:function(s,t){var r=s.data("nb-json"),a=s.children(".nb-json-more"),o=s.children(".nb-json-message"),u=s.attr("id");if($nb.x(t))t=r.data;else{if(t instanceof jQuery&&t.is("form")){var i={};h.each(t.serializeArray(),function(){var t=this.name,n=this.value;i[t]=$nb.x(i[t])?n:$nb.isArray(i[t])?i[t].concat(n):[i[t],n]}),t=i}u in this.data&&(this.data[u]=h.extend(this.data[u],t))}s.find(".uk-alert").remove(),a.length||(s.append(this.more(r.more)),a=s.children(".nb-json-more"));var c=a.children("button");c.html($nb.ukSpinner()).attr("disabled",!0),$nb.isArray(t)&&(t={}),u in this.data||(this.data[u]=t,this.data[u].start||(this.data[u].start=0),this.data[u].init=parseInt(this.data[u].start),this.data[u].limit&&(this.limit=parseInt(this.data[u].limit))),h.getJSON(r.url?r.url:window.location.href,r.more?this.data[u]:r.data,function(t){if(200==t.response){c.html(r.more).removeAttr("disabled");var n=t.message,i=n.items,e=t.action;!$nb.x(n.message)&&$nb.isObject(n.message)&&(o.length||(s.prepend($nb.wrap("","nb-json-message uk-margin")),o=s.children(".nb-json-message")),o.html($nb.ukAlert([n.message.showing,n.count+n.start-$nb.json.data[u].init,n.message.of,n.total-$nb.json.data[u].init,n.message.found].join(" ")+":","primary"))),h.isFunction($nb.json.render[e])?(n.config=$nb.x(n.config)?{}:n.config,n.config.id=u,a.before($nb.json.render[e](i,n.config)),$nb.json.onRender(s,t)):s.html($nb.ukAlert(r.errors.render,"danger")),n.count&&0!==n.remaining&&r.more?($nb.x($nb.json.limit[u])&&($nb.json.limit[u]=parseInt(n.limit)),$nb.json.data[u].start=parseInt($nb.json.data[u].start)+$nb.json.limit[u],s.off("click.nbJsonMore").one("click.nbJsonMore",".nb-json-more",function(){$nb.json.get(s)})):a.hide(),$nb.json.onSuccess(s,t)}else s.html($nb.ukAlert(t.message,"danger"));$nb.json.onReturn(s,t)}).fail(function(t,n,i){$nb.json.onFail(s,r.errors.fail,t,n,i)})},query:function(i,e){var o;e.on("submit",function(t){t.preventDefault?t.preventDefault():t.returnValue=!1;var n=i.data("nb-json");delete $nb.json.data[i.attr("id")],n.data=e.serializeObject(),i.data("nb-json",n).html(""),$nb.json.isQuery=!0,$nb.json.get(i,e)}),(o=jQuery).fn.serializeObject=function(){var s=this,r={},n={},a={validate:/^[a-zA-Z][a-zA-Z0-9_]*(?:\[(?:\d*|[a-zA-Z0-9_]+)\])*$/,key:/[a-zA-Z0-9_]+|(?=\[\])/g,push:/^$/,fixed:/^\d+$/,named:/^[a-zA-Z0-9_]+$/};return this.build=function(t,n,i){return t[n]=i,t},this.push_counter=function(t){return void 0===n[t]&&(n[t]=0),n[t]++},o.each(o(this).serializeArray(),function(){if(a.validate.test(this.name)){for(var t,n=this.name.match(a.key),i=this.value,e=this.name;void 0!==(t=n.pop());)e=e.replace(new RegExp("\\["+t+"\\]$"),""),t.match(a.push)?i=s.build([],s.push_counter(e),i):t.match(a.fixed)?i=s.build([],t,i):t.match(a.named)&&(i=s.build({},t,i));r=o.extend(!0,r,i)}}),r}},onFail:function(t,n,i,e,s){t.html($nb.ukAlert($nb.xy(n,s),"danger"))},onRender:function(t,n){},onReturn:function(t,n){},onSuccess:function(t,n){},more:function(t){return $nb.wrap($nb.wrap(t||$nb.ukIcon("more"),{type:"button",class:["uk-button","uk-button-primary"]},"button"),"nb-json-more uk-text-center uk-margin-large-top")},renderItems:function(){h("[data-nb-json-render]").length&&h("[data-nb-json-render]").each(function(){var t=h(this),n=$nb.base64toJSON(t.data("nb-json-render")),i=n.message,e=n.action;200===n.response&&(h.isFunction($nb.json.render[e])?(i.config=void 0===i.config?{}:i.config,i.config.id=t.attr("id"),t.html($nb.json.render[e](i.items,i.config)).removeAttr("data-nb-json-render"),$nb.json.onRender(t,n),$nb.json.onSuccess(t,n),$nb.json.onReturn(t,n)):$nb.json.onFail(t,$nb.ukIcon("warning")))})}},mailto:function(){h("[data-nb-mailto]").each(function(){var t=h(this),n=t.data("nb-mailto"),i=n.id+"@"+n.domain;t.attr("href","mailto:"+i),t.html(n.text?n.text:i),n.icon&&t[n.iconLink?"prepend":"before"]($nb.icon(n.icon)+" ")})},makeTag:function(t){return this.isTag(t)?t:("<"==t.substr(0,1)?"":"<")+t+(">"==t.substr(t.length-1,1)?"":">")},tel:function(){h("[data-nb-tel]").each(function(){var t=h(this),n=t.data("nb-tel");t.attr("href","tel:"+n.href),t.html(n.text?n.text:n.tel),n.icon&&t[n.iconLink?"prepend":"before"]($nb.icon(n.icon)+" ")})},ukAlert:function(t,n,i){var e=$nb.defaults.ukAlert,s={class:["uk-alert","uk-alert-"+(this.isType(n,"string")?n:e.style)]},r=!1;return this.isObject(i)&&(s["data-uk-alert"]=h.extend({},e.options,i),r=!0),this.wrap((r?this.attr({class:"uk-alert-close","data-uk-close":!0},"a",!0):"")+(this.x(t)?"":this.wrap(t,"p")),s,"div")},ukGetSizes:function(t,n,i){if(this.x(n))return[];this.x(i)&&(i="uk-child-width-1-");for(var e=[],s=0;s<t.length;s++){var r=t[s];if(-1!==r.indexOf(i)){var a=-1!==r.indexOf("@")?r.split("@")[1]:0,o=100/parseInt(r.replace(i,""));e.push((a&&a in n?"(min-width: "+n[a]+"px) ":"")+o.toFixed(2)+"vw")}}return e},ukIcon:function(t,n){return this.attr({"data-uk-icon":{icon:t.replace("uk-",""),ratio:n||1}},"span",!0)},ukNotification:function(t){this.isType(t,"string")&&(t={message:t}),this.x(t.message)||UIkit.notification(h.extend({},$nb.defaults.ukNotification,t))},ukSpinner:function(t){return this.attr({"data-uk-spinner":{ratio:t||1}},"span",!0)},wrap:function(t,n,i){if((this.x(n)||!n)&&this.x(i))return t;if((this.isArray(n)||this.isObject(n))&&(n=this.attr(n,i)),0<=["uk-","nb-"].indexOf(n.substr(0,3))&&(n="<div class='"+n+"'>"),n=this.makeTag(n),this.isArray(t)){var e=n.split(">")[0].replace("<","");t=t.join("</"+e.split(" ")[0]+"><"+e+">")}var s=n.split("></");return 2<=s.length?s[0]+">"+t+"</"+s.splice(1).join("></"):2==(s=n.split(">",2)).length?n+t+"</"+s[0].split(" ")[0].replace(/</gi,"")+">":t},x:function(t){return this.isType(t)},xy:function(t,n){return this.x(t)?this.x(n)?"":n:t}},h(document).ready(function(){$nb.init()})}(jQuery);